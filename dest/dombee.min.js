var Dombee=function(){"use strict";function e(e,t){const n="function"==typeof e?e.toString():e;return Object.keys(t).filter(e=>n.match(new RegExp("\\b"+e+"\\b")))}function t(e,t){const n=Object.keys(t);return Function(...n,"return "+e+";")}function n(e,t){const n=Object.keys(t);return Function(...n,"return `"+e+"`;")}function r(e,{document:t,state:n,values:r}){if(null==e)throw new Error("Dombee.directive(config) failed. The first parameter must be a config object or function, but is null.");let i=e;if("function"==typeof e){if(i=e({state:n,data:r}),null==i)throw new Error("Dombee.directive(config) failed. Your first parameter is a function ("+e+") but it returns null. Did you forget to return the configuration?");i.name=e.name}if(null==i.onChange)throw new Error('Dombee.directive(config) failed. Your directive config needs property "onChange" to be initialized successfully.');if("function"!=typeof i.onChange)throw new Error("Dombee.directive(config) failed. config.onChange must be a function.");if("string"!=typeof i.expressions&&"function"!=typeof i.expressions&&!Array.isArray(i.expressions)&&!i.expressions.expression)throw new Error("Dombee.directive(config) failed. config.expressions must be an Array or a function that returns an Array or a string. But it is "+typeof e.expressions);if("string"!=typeof i.bindTo&&"function"!=typeof i.bindTo&&!Array.isArray(i.bindTo))throw new Error("Dombee.directive(config) failed. config.bindTo must be an Array, a String or a function that returns an Array or a string. But it is "+typeof e.bindTo);return i.elements=function(e,t,n){let r=e;"function"==typeof r&&(r=r());if(!r)throw new Error(`Dombee.directive(config) failed for directive ${t.name}. config.bindTo returns null but should return a selector, element, Array of elements or function that returns one of these.`);if(Array.isArray(r)){for(let e of r)if(!o(e)&&"string"==(e.expression,!1))throw new Error("Error in function Dombee.directive(config). config.bindTo returns an Array, but with invalid elements. Only DOMElements are allowed. But it has "+e);return r}return"string"==typeof r?n.querySelectorAll(r)||[]:[r]}(i.bindTo,i,t),i}function o(e){try{return null!=e.tagName}catch(e){return!1}}function i(e=""){return e+Math.random().toString(36).substring(2,15)}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var s=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e,t){var n="[object Arguments]",r="[object Function]",o="[object GeneratorFunction]",i="[object Map]",s="[object Set]",c=/\w*$/,u=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,l={};l[n]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object DataView]"]=l["[object Boolean]"]=l["[object Date]"]=l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l[i]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l[s]=l["[object String]"]=l["[object Symbol]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Error]"]=l[r]=l["[object WeakMap]"]=!1;var d="object"==typeof a&&a&&a.Object===Object&&a,p="object"==typeof self&&self&&self.Object===Object&&self,y=d||p||Function("return this")(),b=t&&!t.nodeType&&t,h=b&&e&&!e.nodeType&&e,g=h&&h.exports===b;function v(e,t){return e.set(t[0],t[1]),e}function _(e,t){return e.add(t),e}function j(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function m(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function x(e,t){return function(n){return e(t(n))}}function A(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var E,T=Array.prototype,O=Function.prototype,k=Object.prototype,S=y["__core-js_shared__"],C=(E=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",D=O.toString,F=k.hasOwnProperty,$=k.toString,I=RegExp("^"+D.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=g?y.Buffer:void 0,P=y.Symbol,B=y.Uint8Array,M=x(Object.getPrototypeOf,Object),U=Object.create,q=k.propertyIsEnumerable,W=T.splice,R=Object.getOwnPropertySymbols,N=L?L.isBuffer:void 0,V=x(Object.keys,Object),z=he(y,"DataView"),J=he(y,"Map"),Y=he(y,"Promise"),G=he(y,"Set"),H=he(y,"WeakMap"),K=he(Object,"create"),Q=me(z),X=me(J),Z=me(Y),ee=me(G),te=me(H),ne=P?P.prototype:void 0,re=ne?ne.valueOf:void 0;function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){this.__data__=new ie(e)}function ce(e,t){var r=xe(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ae(e)}(e)&&F.call(e,"callee")&&(!q.call(e,"callee")||$.call(e)==n)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=r.length,i=!!o;for(var a in e)!t&&!F.call(e,a)||i&&("length"==a||_e(a,o))||r.push(a);return r}function ue(e,t,n){var r=e[t];F.call(e,t)&&we(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function fe(e,t){for(var n=e.length;n--;)if(we(e[n][0],t))return n;return-1}function le(e,t,a,u,f,d,p){var y;if(u&&(y=d?u(e,f,d,p):u(e)),void 0!==y)return y;if(!Oe(e))return e;var b=xe(e);if(b){if(y=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&F.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,y)}else{var h=ve(e),g=h==r||h==o;if(Ee(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if("[object Object]"==h||h==n||g&&!d){if(m(e))return d?e:{};if(y=function(e){return"function"!=typeof e.constructor||je(e)?{}:(t=M(e),Oe(t)?U(t):{});var t}(g?{}:e),!t)return function(e,t){return ye(e,ge(e),t)}(e,function(e,t){return e&&ye(t,ke(t),e)}(y,e))}else{if(!l[h])return d?e:{};y=function(e,t,n,r){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return pe(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case i:return function(e,t,n){return j(t?n(w(e),!0):w(e),v,new e.constructor)}(e,r,n);case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,c.exec(e));return t.lastIndex=e.lastIndex,t}(e);case s:return function(e,t,n){return j(t?n(A(e),!0):A(e),_,new e.constructor)}(e,r,n);case"[object Symbol]":return a=e,re?Object(re.call(a)):{}}var a}(e,h,le,t)}}p||(p=new se);var x=p.get(e);if(x)return x;if(p.set(e,y),!b)var E=a?function(e){return function(e,t,n){var r=t(e);return xe(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,ke,ge)}(e):ke(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(E||e,(function(n,r){E&&(n=e[r=n]),ue(y,r,le(n,t,a,u,r,e,p))})),y}function de(e){return!(!Oe(e)||(t=e,C&&C in t))&&(Te(e)||m(e)?I:u).test(me(e));var t}function pe(e){var t=new e.constructor(e.byteLength);return new B(t).set(new B(e)),t}function ye(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r?r(n[a],e[a],a,n,e):void 0;ue(n,a,void 0===s?e[a]:s)}return n}function be(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function he(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return de(n)?n:void 0}oe.prototype.clear=function(){this.__data__=K?K(null):{}},oe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},oe.prototype.get=function(e){var t=this.__data__;if(K){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return F.call(t,e)?t[e]:void 0},oe.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:F.call(t,e)},oe.prototype.set=function(e,t){return this.__data__[e]=K&&void 0===t?"__lodash_hash_undefined__":t,this},ie.prototype.clear=function(){this.__data__=[]},ie.prototype.delete=function(e){var t=this.__data__,n=fe(t,e);return!(n<0)&&(n==t.length-1?t.pop():W.call(t,n,1),!0)},ie.prototype.get=function(e){var t=this.__data__,n=fe(t,e);return n<0?void 0:t[n][1]},ie.prototype.has=function(e){return fe(this.__data__,e)>-1},ie.prototype.set=function(e,t){var n=this.__data__,r=fe(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ae.prototype.clear=function(){this.__data__={hash:new oe,map:new(J||ie),string:new oe}},ae.prototype.delete=function(e){return be(this,e).delete(e)},ae.prototype.get=function(e){return be(this,e).get(e)},ae.prototype.has=function(e){return be(this,e).has(e)},ae.prototype.set=function(e,t){return be(this,e).set(e,t),this},se.prototype.clear=function(){this.__data__=new ie},se.prototype.delete=function(e){return this.__data__.delete(e)},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ie){var r=n.__data__;if(!J||r.length<199)return r.push([e,t]),this;n=this.__data__=new ae(r)}return n.set(e,t),this};var ge=R?x(R,Object):function(){return[]},ve=function(e){return $.call(e)};function _e(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||f.test(e))&&e>-1&&e%1==0&&e<t}function je(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||k)}function me(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function we(e,t){return e===t||e!=e&&t!=t}(z&&"[object DataView]"!=ve(new z(new ArrayBuffer(1)))||J&&ve(new J)!=i||Y&&"[object Promise]"!=ve(Y.resolve())||G&&ve(new G)!=s||H&&"[object WeakMap]"!=ve(new H))&&(ve=function(e){var t=$.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?me(n):void 0;if(r)switch(r){case Q:return"[object DataView]";case X:return i;case Z:return"[object Promise]";case ee:return s;case te:return"[object WeakMap]"}return t});var xe=Array.isArray;function Ae(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Te(e)}var Ee=N||function(){return!1};function Te(e){var t=Oe(e)?$.call(e):"";return t==r||t==o}function Oe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ke(e){return Ae(e)?ce(e):function(e){if(!je(e))return V(e);var t=[];for(var n in Object(e))F.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}e.exports=function(e){return le(e,!0,!0)}}));const c={directives:[],events:{onload:[]},dependencyEvaluationStrategy:e,expressionTypes:{js:t,"js-template-string":n},defaultExpressionTypes:["js","js-template-string"]};let u=s(c);function f(e={}){const t={_localDumbeeCache:!0,bindings:{},dependencies:{}},n=new Proxy(e,{set(e,r,o){e[r]=o,d(e,r,o);for(let o of t.dependencies[r])d(e,o,n[o]);return!0},get:(e,t)=>e[t]});for(let e of u.events.onload)e({cache:t,state:n});function o(e="",t){const n=c(),r=Object.keys(n).map(e=>n[e]);return("string"==typeof e?a(e,t):e)(...r)}function a(e,t){const n=c("parsable");for(let r of t)try{const t=u.expressionTypes[r];if(null==t)throw`Expressiontype "${r}" does not exist. If the name is correct, please add it with "Dombee.addExpressionType('${r}', function(text,values){/*your code here*/})"`;return t(e,n)}catch(e){if("string"==typeof e)throw new Error(e)}throw new Error(`Expression ${e} can not be parsed.`)}function s(e,r,o,s={}){const c=e.expression?e.expression.toString():e.toString(),f=u.dependencyEvaluationStrategy(c,n),l=function(e){return e&&e.expressionTypes?Array.isArray(e.expressionTypes)?e.expressionTypes:[e.expressionTypes]:u.defaultExpressionTypes}(s);for(let n of f)if(t.dependencies[n]||(t.dependencies[n]=[]),n!==r){const c=o?o+"_"+i(""):r;t.dependencies[n].push(c),t.bindings[c]={elemid:o,name:r,onChange:s.onChange,resultFn:a(e.expression?e.expression:e,l),resultFnRaw:e.expression?e.expression:e,expression:e,expressionTypes:l}}}function c(e){const t={};return Object.keys(n).forEach(r=>{let o=n[r],i=o;"function"==typeof o&&(o=o(n),i=o),null==o&&(i="''"),"string"==typeof o&&e&&(i=`'${o}'`),"object"==typeof o&&e&&(i=JSON.stringify(o)),t[r]=i}),t}function l(){return f.document||document}for(let e of u.directives){const t=r(e,{document:l(),state:n,values:c});for(let e of t.elements){e.dataset||(e.dataset={});const n=e.dataset.id||i("id_");null==e.dataset.id&&(e.dataset.id=n);let r=t.expressions(e);Array.isArray(r)||(r=[r]);for(let e of r)s(e,0,n,t)}}const d=(e,n,r)=>{const i=t.dependencies[n]||[];for(let e of i){const i=t.bindings[e],a=l().querySelector(`[data-id="${i.elemid}"]`),s=o(i.resultFn,i.expressionTypes);i.onChange&&i.onChange(a,s,{values:c,property:n,value:r,expression:i.expression})}};return Object.keys(n).forEach(e=>{"function"==typeof n[e]&&s(n[e],e),d(n,e,n[e])}),{state:n,values:c(),watch:function(e,t){},cache:t}}function l(e){u.events.onload.push(e)}function d(e){u.directives.push(e)}return Object.assign(f,{directive:d,dependencyEvaluationStrategy:function(e){if(null==e)throw new Error("fn is null but must be a function;");f.dependencyEvaluationStrategy=e},dependencyEvaluationStrategyDefault:e,addExpressionType:function(e,t){if(null==e)throw new Error("addExpressionType(name,fn) failed.  Name is undefined");if(null==t)throw new Error("addExpressionType(name,fn) failed. Function fn is undefined");if(getScope(this).globalCache.expressionTypes[e])throw new Error("addExpressionType(name,fn) failed. Expressiontype "+e+" already exists an can not be overwritten. Please choose another name");f.expressionTypes[e]=t},expressionTypeJs:t,expressionTypeJsTemplateString:n,addPlugin:function(e){e(f)},onLoad:l,globalCache:u,reset:function(){u=s(c)},_id:i()}),d({name:"inputElementCheckboxes",bindTo:'input[data-model][type="checkbox"]',expressions:e=>e.dataset.model,onChange(e,t,{property:n,value:r}){r?e.setAttribute("checked","checked"):e.removeAttribute("checked")}}),d((function(){return{bindTo:'[data-model]:not([type="radio"])',expressions:e=>e.dataset.model,onChange(e,t,{property:n,value:r}){e.value=r}}})),d((function(){return{bindTo:'input[data-model][type="radio"]',expressions:e=>e.dataset.model,onChange(e,t,{property:n,value:r}){e.value==r&&e.setAttribute("checked","checked")}}})),d((function(){return{bindTo:"[data-bind]",expressions:e=>e.dataset.bind,onChange(e,t,n){e.innerHTML=t}}})),d((function(){return{expressions:e=>e.dataset.class,bindTo:"[data-class]",onChange(e,t,n){"object"==typeof t?Object.keys(t).forEach(n=>{t[n]?e.classList.add(n):e.classList.remove(n)}):e.setAttribute("class",t)}}})),d((function(){return{bindTo:"[data-style]",expressions:e=>e.dataset.style,onChange(e,t,n){"object"==typeof t?Object.keys(t).forEach(n=>{e.style[n]=t[n]}):e.setAttribute("style",t)}}})),d((function(){return{bindTo:()=>Array.from(document.querySelectorAll("*")).filter(e=>Object.keys(e.dataset).filter(e=>e.startsWith("style.")).length>0),expressions:e=>Object.keys(e.dataset).filter(e=>e.startsWith("style.")).map(t=>e.dataset[t]),onChange(e,t,{property:n}){e.style[n]=t}}})),d((function(){return{bindTo:Array.from(document.querySelectorAll("*")).filter(e=>Object.keys(e.dataset).filter(e=>e.startsWith("class.")).length>0),expressions:e=>Object.keys(e.dataset).filter(e=>e.startsWith("class.")).map(t=>({expression:e.dataset[t],classname:t.replace("class.","")})),onChange(e,t,{property:n,value:r,expression:o}){t?e.classList.add(o.classname):e.classList.remove(o.classname)}}})),d((function(){return{bindTo:"data-show",expressions:e=>e.dataset.show,onChange(e,t){e.style.display=t?"block":"none"}}})),l((function({state:e}){const t=document.querySelectorAll('[data-model]:not([type="checkbox"])'),n=document.querySelectorAll('input[data-model][type="checkbox"]');for(let n of t)n.addEventListener("keyup",(function(){const t=n.dataset.model;e[t]=n.value})),n.addEventListener("change",(function(){const t=n.dataset.model;e[t]=n.value}));for(let t of n)t.addEventListener("change",(function(){const n=t.dataset.model;e[n]=t.checked}))})),d((function(){return{bindTo:"data-show",expressions:e=>e.dataset.show,onChange(e,t){e.style.display=t?"block":"none"}}})),f}();
