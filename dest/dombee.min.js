var Dombee=function(){"use strict";function e(e,t){const n="function"==typeof e?e.toString():e;return Object.keys(t).filter(e=>n.match(new RegExp("\\b"+e+"\\b")))}const t={directives:[],dependencyEvaluationStrategy:e};function n(e={}){const n={bindings:{},dependencies:{}};function s(e){return e+Math.random().toString(36).substring(2,15)}const r=new Proxy(e,{set(e,t,o){e[t]=o,l(e,t,o);for(let o of n.dependencies[t])l(e,o,r[o]);return!0},get:(e,t)=>e[t]});function a(e=""){const t=d(),n=Object.keys(t).map(e=>t[e]);return("string"==typeof e?i(e):e)(...n)}function i(e){const t=d("parsable"),n=Object.keys(t);try{const t="return "+e+";";return Function(...n,t)}catch(t){try{const t="return `"+e+"`;";return Function(...n,t)}catch(e){console.log("code can not be parsed",codeNonString)}}}function c(e,o,a,c){const d=e.expression?e.expression.toString():e.toString(),l=t.dependencyEvaluationStrategy(d,r);for(let t of l)if(n.dependencies[t]||(n.dependencies[t]=[]),t!==o){const r=a?a+"_"+s(""):o;n.dependencies[t].push(r),n.bindings[r]={elemid:a,name:o,bindingFn:c,resultFn:i(e.expression?e.expression:e),resultFnRaw:e.expression?e.expression:e,expression:e}}}function d(e){const t={};return Object.keys(r).forEach(n=>{let o=r[n],s=o;"function"==typeof o&&(o=o(r),s=o),null==o&&(s="''"),"string"==typeof o&&e&&(s=`'${o}'`),"object"==typeof o&&e&&(s=JSON.stringify(o)),t[n]=s}),t}for(let e of t.directives){let t="function"==typeof e?e({state:r,data:d()}):e;if(t=Object.assign({name:e.name},t),t.onChange){const e=o(t.bindTo);for(let n of e){const e=n.dataset.id||s("id_");null==n.dataset.id&&(n.dataset.id=e);let o=t.expressions(n);Array.isArray(o)||(o=[o]);for(let n of o)c(n,0,e,t.onChange)}}}const l=(e,t,o)=>{const s=n.dependencies[t]||[];for(let e of s){const s=n.bindings[e],r=document.querySelector(`[data-id="${s.elemid}"]`),i=a(s.resultFn);s.bindingFn&&s.bindingFn(r,i,{values:d,property:t,value:o,expression:s.expression})}};return Object.keys(r).forEach(e=>{"function"==typeof r[e]&&c(r[e],e),l(r,e,r[e])}),{state:r,values:d(),watch:function(e,t){},cache:n}}function o(e){let t=e;if("function"==typeof t&&(t=t()),null==t)throw new Error("Registerconfig.bindTo returns null but should return a selector, element, Array of elements or function that returns one of these.");return Array.isArray(t)?t:"string"==typeof t?document.querySelectorAll(t):[t]}function s(e){t.directives.push(e)}return n.directive=s,n.dependencyEvaluationStrategyDefault=e,n.dependencyEvaluationStrategy=function(e){if(null==e)throw new Error("fn is null but must be a function;");t.dependencyEvaluationStrategy=e},s({name:"inputElementCheckboxes",bindTo:'input[data-model][type="checkbox"]',expressions:e=>e.dataset.model,onChange(e,t,{property:n,value:o}){o?e.setAttribute("checked","checked"):e.removeAttribute("checked")}}),s((function(){return{bindTo:'[data-model]:not([type="radio"])',expressions:e=>e.dataset.model,onChange(e,t,{property:n,value:o}){e.value=o}}})),s((function(){return{bindTo:'input[data-model][type="radio"]',expressions:e=>e.dataset.model,onChange(e,t,{property:n,value:o}){e.value==o&&e.setAttribute("checked","checked")}}})),s((function(){return{bindTo:"[data-bind]",expressions:e=>e.dataset.bind,onChange(e,t,n){e.innerHTML=t}}})),s((function(){return{expressions:e=>e.dataset.class,bindTo:"[data-class]",onChange(e,t,n){"object"==typeof t?Object.keys(t).forEach(n=>{t[n]?e.classList.add(n):e.classList.remove(n)}):e.setAttribute("class",t)}}})),s((function(){return{bindTo:"[data-style]",expressions:e=>e.dataset.style,onChange(e,t,n){"object"==typeof t?Object.keys(t).forEach(n=>{e.style[n]=t[n]}):e.setAttribute("style",t)}}})),s((function(){return{bindTo:()=>Array.from(document.querySelectorAll("*")).filter(e=>Object.keys(e.dataset).filter(e=>e.startsWith("style.")).length>0),expressions:e=>{const t=Object.keys(e.dataset).filter(e=>e.startsWith("style.")).map(t=>e.dataset[t]);return console.log(t),t},onChange(e,t,{property:n}){e.style[n]=t}}})),s((function(){return{bindTo:Array.from(document.querySelectorAll("*")).filter(e=>Object.keys(e.dataset).filter(e=>e.startsWith("class.")).length>0),expressions:e=>{const t=Object.keys(e.dataset).filter(e=>e.startsWith("class.")).map(t=>({computation:e.dataset[t],classname:t.replace("class.","")}));return console.log(t),t},onChange(e,t,{property:n,value:o,computation:s}){t?e.classList.add(s.classname):e.classList.remove(s.classname)}}})),s((function({data:e,state:t}){const n=document.querySelectorAll('[data-model]:not([type="checkbox"])'),o=document.querySelectorAll('input[data-model][type="checkbox"]');for(let e of n)e.addEventListener("keyup",(function(){const n=e.dataset.model;t[n]=e.value})),e.addEventListener("change",(function(){const n=e.dataset.model;t[n]=e.value}));for(let e of o)e.addEventListener("change",(function(){const n=e.dataset.model;t[n]=e.checked}))})),s((function(){return{bindTo:"data-show",expressions:e=>e.dataset.show,onChange(e,t){e.style.display=t?"block":"none"}}})),n}();
